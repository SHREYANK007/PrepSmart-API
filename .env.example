# ============================================
# PrepSmart Python API Configuration
# ============================================

# Server Configuration
DEBUG=True
API_VERSION=v1
HOST=0.0.0.0
PORT=8000
WORKERS=4

# Database Configuration
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/prepsmart
# Alternative MongoDB
# MONGODB_URL=mongodb://localhost:27017/prepsmart

# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORG_ID=org-your-openai-org-id-here
OPENAI_MODEL_GPT=gpt-4-turbo-preview
OPENAI_MODEL_WHISPER=whisper-1
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.3

# Whisper Configuration
WHISPER_MODEL=base  # tiny, base, small, medium, large
WHISPER_DEVICE=cpu  # cpu or cuda
ENABLE_WORD_TIMESTAMPS=true
CONDITION_ON_PREVIOUS_TEXT=false

# Audio Processing
MAX_AUDIO_SIZE=25MB
ALLOWED_AUDIO_FORMATS=mp3,wav,m4a,ogg,flac
AUDIO_SAMPLE_RATE=16000
CHUNK_DURATION_MS=30000  # 30 seconds

# Authentication & Security
SECRET_KEY=your-super-secret-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440  # 24 hours
REFRESH_TOKEN_EXPIRE_DAYS=30

# WordPress Integration
WORDPRESS_BASE_URL=https://yoursite.com
WORDPRESS_API_ENDPOINT=/wp-json/wp/v2
WORDPRESS_API_KEY=your-wordpress-api-key
WORDPRESS_WEBHOOK_SECRET=your-webhook-secret
WORDPRESS_DB_HOST=localhost
WORDPRESS_DB_NAME=wordpress
WORDPRESS_DB_USER=wp_user
WORDPRESS_DB_PASSWORD=wp_password

# File Storage
STORAGE_PROVIDER=s3  # s3, r2, local
# AWS S3
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_BUCKET_NAME=prepsmart-audio-files
AWS_REGION=us-east-1

# CloudFlare R2 (Alternative)
R2_ACCOUNT_ID=your-r2-account-id
R2_ACCESS_KEY_ID=your-r2-access-key
R2_SECRET_ACCESS_KEY=your-r2-secret-key
R2_BUCKET_NAME=prepsmart-files
R2_ENDPOINT_URL=https://your-account.r2.cloudflarestorage.com

# Local Storage
LOCAL_STORAGE_PATH=./uploads
STATIC_FILES_URL=/static

# Redis Configuration
REDIS_URL=redis://localhost:6379/0
CACHE_TTL=3600  # 1 hour
ENABLE_CACHING=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=3600  # 1 hour in seconds
RATE_LIMIT_STORAGE_URL=redis://localhost:6379/1

# CORS Settings
CORS_ORIGINS=["http://localhost:3000", "https://yoursite.com"]
CORS_CREDENTIALS=true
CORS_METHODS=["GET", "POST", "PUT", "DELETE"]
CORS_HEADERS=["*"]

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=./logs/api.log
ENABLE_ACCESS_LOG=true
SENTRY_DSN=your-sentry-dsn-here

# Background Tasks (Celery)
CELERY_BROKER_URL=redis://localhost:6379/2
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]

# Model Configuration
MODELS_CACHE_DIR=./models
AUTO_DOWNLOAD_MODELS=true
WARM_UP_MODELS=false

# Performance Settings
MAX_WORKERS=4
WORKER_TIMEOUT=300  # 5 minutes
MAX_CONCURRENT_REQUESTS=10
AUDIO_PROCESSING_TIMEOUT=120  # 2 minutes

# Speech Analysis Settings
ENABLE_PAUSE_DETECTION=true
MIN_PAUSE_DURATION=0.5  # seconds
SPEAKING_RATE_THRESHOLD=150  # words per minute
PRONUNCIATION_THRESHOLD=0.8
FLUENCY_WEIGHT=0.3
PRONUNCIATION_WEIGHT=0.4
CONTENT_WEIGHT=0.3

# Development Settings
MOCK_AI_RESPONSES=false
ENABLE_PROFILING=false
DEBUG_AUDIO_SAVE=false
SKIP_MODEL_LOADING=false

# Email Configuration (for notifications)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
FROM_EMAIL=noreply@prepsmart.com
ADMIN_EMAIL=admin@prepsmart.com

# Monitoring & Health Checks
HEALTH_CHECK_INTERVAL=30  # seconds
MEMORY_LIMIT_MB=2048
CPU_LIMIT_PERCENT=80

# API Documentation
API_TITLE=PrepSmart Scoring API
API_DESCRIPTION=AI-powered PTE practice scoring system
API_VERSION=1.0.0
DOCS_URL=/docs
REDOC_URL=/redoc
OPENAPI_URL=/openapi.json